<h3 class="no_top_margin">
  <% if @index_search.present? %>
    Searched For <%= %Q("#{@index_search}") %>
  <% else %>
    <% if @genre == 'All' %>
      All Concerts
    <% else %>
      <%= @genre %> <%= 'Music' unless @genre == 'Other' %> Concerts
    <% end %>
  <% end %>
</h3>
<% if @concerts.empty? && 
     @genre == 'All' && @index_search.nil? %>
     <p> There are no concerts. Add some! </p>
<% elsif @concerts.empty? %>
  <p> Your search turned up empty. Time to add your favorite concert to our website! </p>
<% else %>
  <table class="center">
  	<tr>
  		<th> Rank </th>
  		<th> Name </th>
  		<th> Score </th>
  		<th> Votes </th>
  		<th> Genre </th>
  	</tr>
  	<% @concerts.each do |c| %>
  		<tr>
    		<td>
          <% if c.number_of_votes == 0 %>
            N/A
          <% else %>
            <%= c.rank %>.
          <% end %>
        </td>
        <td>
          <b> <%= link_to "#{c.name}", concert_path(c.id) %> </b>
        </td>
    		<td> 
          <% if c.number_of_votes == 0 %>
      			No Score
      		<% else %>
      			<%= number_with_precision(c.aggregate_score, precision: 1) %>
      		<% end %>
        </td>
    		<td> <%= c.number_of_votes %> </td>
    		<td> <%= c.genre %> </td>
        <% if user_signed_in? %>
          <td>
            <% if current_or_guest_user.admin? %>
              <%= link_to 'Delete', concert_path(c, genre: @genre,
                    index_search: @index_search), method: :delete, remote: true %>
            <% end %>
          </td>
        <% end %>
  		</tr>
  	<% end %>
  </table>
  <div class="pagination">
  	<%= will_paginate @concerts, container: false, param_name: 'concerts_page', 
          params: { genre: @genre, search: @index_search } %>
  	<div class="pagination_info">
      	(<%= pluralize(@concerts.total_entries, 'Concert') %>)
  	</div>
  </div>
<% end %>